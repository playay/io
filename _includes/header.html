
<div id="iiie"></div>
<script>
    var IIIE = undefined
    IIIE = new Vue({
        el:"#iiie",
        data: {},
        methods: {
            xxx: () => {

            }
        }
    })
    if (!IIIE) {
        UIkit.modal.alert("该网页不支持您的浏览器版本，推荐使用 chrome 浏览器")
    }
</script>


<nav class="uk-navbar">
    <a class="uk-navbar-brand" data-uk-offcanvas="{target:'#offcanvas-nav',mode:'push'}">
        <i class="uk-icon-bars" data-uk-tooltip title="ctrl+b"></i>
    </a>
    <ul id="alipay-red-bao-ul" class="uk-navbar-nav uk-visible-large" style="display:none;">
        <li class="uk-parent" data-uk-dropdown="{'remaintime':200}">
            <a id="alipay-red-bao" class="red-point" v-on:mouseover="view()">支付宝红包</a>
            <div class="uk-dropdown uk-dropdown-small" style="width:240px;">
                <figure class="uk-overlay">
                    <img src="https://cdn.feling.io/images/alipay-red-bao.png"><br>
                    <figcaption class="uk-overlay-panel uk-overlay-bottom" style="padding:0;">
                        <button class="uk-button uk-width-1-1" style="height:39px;" v-on:click="doNotShow()">不再显示</button>
                    </figcaption>
                </figure>
            </div>
        </li>
    </ul>
    <style>
        .red-point{
            position: relative;
        }
        .red-point::before{
            content: " ";
            border: 4px solid red;
            border-radius:4px;
            position: absolute;
            z-index: 1000;
            right: 0%;
            margin-right: 10px;
            margin-top: 8px;
        }
    </style>
    <script>
        var vm_alipay_red_bao = new Vue({
            el: '#alipay-red-bao-ul',
            mounted: function () {
                if (localStorage.alipayRedBaoNeedShow != '0') {
                    $('#alipay-red-bao-ul').show()
                    if (new Date().setHours(0,0,0,0) < localStorage.alipayRedBaoViewTime
                        && localStorage.alipayRedBaoViewTime < new Date().setHours(23,59,59,0)) {
                        $('#alipay-red-bao').removeClass('red-point')
                    } else {
                        $('#alipay-red-bao').addClass('red-point')
                    }
                }
            },
            methods: {
                view: function() {
                    localStorage.alipayRedBaoViewTime = new Date().getTime()
                    $('#alipay-red-bao').removeClass('red-point')
                },
                doNotShow: function() {
                    localStorage.alipayRedBaoNeedShow = '0'
                    $('#alipay-red-bao-ul').hide(1000)
                }
            }
        })
    </script>

    <div id="offcanvas-nav" class="uk-offcanvas">
        <div class="uk-offcanvas-bar">
            <ul class="uk-nav uk-nav-offcanvas" style="padding-top:10px" data-uk-nav>
                
                <li><a href="/redis/">网页版 redis 客户端</a></li>

                <li class="uk-nav-divider"></li>
                <li><a href="/json/">Json 格式化</a></li>
                <li><a href="/base64/">Base64 编解码</a></li>
                <li><a href="/timestamp/">时间戳 ⇄ 时间</a></li>

                <li class="uk-nav-divider"></li>
                <li><a href="https://ocarina-diary.com/blogs/">陶笛日记</a></li>

            </ul>
        </div>
    </div>
    <script>
        hotkeys('ctrl+b,command+b', function(event,handler) {
            if ($('#offcanvas-nav').is(":visible")) {
                UIkit.offcanvas.hide()
            } else {
                UIkit.offcanvas.show('#offcanvas-nav')
            }
        })
    </script>

    <div class="uk-navbar-flip">
        <ul class="uk-navbar-nav" id="disqus_thread_modal_entrance" style="display:none;">
            <li><a href="#disqus_thread_modal" data-uk-modal>反馈与意见</a></li>
        </ul>

        <div id="disqus_thread_modal" class="uk-modal ">
            <div class="uk-modal-dialog">
                <a class="uk-modal-close uk-close"></a>
                <div id="disqus_thread">您的网络环境无法加载 disqus 的评论模块</div>
            </div>
            <script>
                var disqus_config = function () {
                    this.page.url = "https://feling.io{{ page.url }}";
                    this.page.identifier = "https://feling.io{{ page.url }}";
                };
                var d = document, s = d.createElement('script');
                s.src = '//feling.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            </script>
        </div>
        
         
        <a id="signInButton" class="uk-navbar-brand" onselectstart="return false;"
            style="display:none;font-weight:bold;font-size:16px;">
            <i id="signInSpinner" class="al-spinner" style="display:none"></i>
            Sign In With Google
        </a>
        <ul id="userAvatarAndName" class="uk-navbar-nav" style="display:none;">
            <li class="uk-parent" data-uk-dropdown="{mode:'click',pos:'bottom-right'}">
                <a class="uk-navbar-content" onselectstart="return false;">
                    <img id="userAvatar" style="width:30px;height:30px;border-radius:50%;">
                    <span id="userName"></span>  <i class="uk-icon-caret-down"></i>
                </a>
                <div class="uk-dropdown uk-dropdown-small uk-dropdown-navbar">
                    <ul class="uk-nav uk-nav-navbar">
                        <!-- <li><a href="#showAccessToken" data-uk-modal>查看 accessToken</a></li> -->
                        <li><a href="https://pages.feling.net/2018/11/google-api-proxy.html" target="_blank">nginx 海外接口代理</a></li>
                        <li><a onClick="signOut()">退出登录  <i id="signOutSpinner" class="al-spinner" style="display:none"></i></a></li>
                    </ul>
                </div>
            </li>
        </ul>
        <script>
            function signOut() {
                $("#signOutSpinner").show()
                WithFParams.postForm('/login/signOut', {}, () => { })
                    .always(() => {
                        localStorage.removeItem('accessToken')
                        localStorage.removeItem('accessTokenExpiredAt')
                        localStorage.removeItem('userAvatar')
                        localStorage.removeItem('userName')
                        $("#signInButton").show()
                        $("#ss-affiliates").hide()
                        $("#userAvatarAndName").hide()
                        $("#signOutSpinner").hide()
                    })
                if (typeof gapi != "undefined") {
                    var auth2 = gapi.auth2.getAuthInstance()
                    auth2.signOut().then(() => {})
                }
            }
            function loadUserAvatarAndNameFormLocalStorage2ShowInNavBar () {
                if (localStorage.accessToken) {
                    $("#userAvatar").attr("src", localStorage.userAvatar)
                    $("#userName").html(localStorage.userName)
                    $("#showAccessToken_0").html(localStorage.accessToken)
                    $("#showAccessToken_1").html(new Date(localStorage.accessTokenExpiredAt).toLocaleString())
                    $("#userAvatarAndName").show()
                    $("#signInButton").hide()
                } else {
                    $("#userAvatarAndName").hide()
                }
            }
            if (localStorage.accessToken) {
                WithFParams.postForm('/login/getLoginInfo',
                    {
                        accessToken: localStorage.accessToken
                    },
                    (result) => {
                        if (result.success && result.data) {
                            localStorage.accessTokenExpiredAt = result.data.accessTokenExpiredAt
                            localStorage.userAvatar = result.data.userAvatar
                            localStorage.userName = result.data.userName
                        } else {
                            localStorage.removeItem('accessToken')
                            localStorage.removeItem('accessTokenExpiredAt')
                            localStorage.removeItem('userAvatar')
                            localStorage.removeItem('userName')
                            $("#signInButton").show()
                            $("#userAvatarAndName").hide()
                        }
                    }
                ).always(() => {
                    loadUserAvatarAndNameFormLocalStorage2ShowInNavBar()
                })
            } else {
                loadUserAvatarAndNameFormLocalStorage2ShowInNavBar()
            }
        </script>
    </div>

    <ul id="header-extend" class="uk-navbar-nav uk-navbar-content uk-navbar-center uk-hidden-small">
        {% raw %}
        <li style="float:right">
            <div id="header-notify" v-bind:class="{'uk-alert':true, 'uk-alert-danger':level=='danger', 'uk-alert-warning':level=='warning', 'uk-alert-success':level=='success'}" 
                style="display:none;margin-bottom:0px;" v-show="msg">
                {{msg}}
            </div>
            <script>
                vm_header_notify = new Vue({
                    el: '#header-notify',
                    data: {
                        level:'',
                        msg: ''
                    },
                    methods: {
                        notify: function(msg, level, duration) {
                            // msg: 字符串不能太长
                            // level: 'danger' 红色, 'warning'黄色,'success'绿色, '' 蓝色
                            if (isNaN(duration)) {
                                duration= 3000
                            }
                            if (msg.length > 110) {
                                msg = msg.substring(0, 100)
                            }
                            this.msg = msg
                            this.level = level
                            setTimeout(() => {this.msg = ''; this.level = ''}, duration)
                        }
                    }
                })
            </script>
        </li>
        {% endraw %}
    </ul>
    <!-- 
    <p><i class="uk-icon-wechat"></i> 微信 </p>
    <img src="//cdn.feling.io/images/donate-wechat.jpg" style="width:128px;height:128px;"/>
 
    <p><img src="//cdn.feling.io/images/icon-alipay.svg" style="width:18px;height:18px;"/> 支付宝 </p>
    <img src="//cdn.feling.io/images/donate-alipay.png" style="width:128px;height:128px;"/>
    -->

</nav>

<div id="googleThings"></div>
<script src="//cdn.feling.io/js/googleThings-2.0.3.js" async defer></script>
<!-- <div id="showAccessToken" class="uk-modal">
    <div class="uk-modal-dialog" style="width:700px;">
        <table class="uk-table">
            <tbody>
                <tr>
                    <td class="uk-text-left uk-text-bold">accessToken</td>
                    <td id="showAccessToken_0" class="uk-text-left"></td>
                </tr>
                <tr>
                    <td class="uk-text-left uk-text-bold">过期时间</td>
                    <td id="showAccessToken_1" class="uk-text-left"></td>
                </tr>
            </tbody>
        </table>
        <ul class="uk-list">
            <li>1. 重新登录, 即可重置 accessToken</li>
            <li>2. 调用获取用户信息接口, 能延长 accessToken 的有效期至 当前时间+30天</li>
            <li>3. 登录状态下刷新页面、调用需要 accessToken 作参数的接口 等, 均会间接触发调用获取用户信息接口</li>
        </ul>
    </div>
</div> -->
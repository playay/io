---
layout: default
keywords: [feling.io, 在线工具, json]
---

<div id="main" class="uk-grid uk-grid-collapse">
    <div class="uk-width-4-10" style="padding: 10px;">
        <textarea id="json_src" class="uk-width-1-1" autofocus 
        v-model="jsonSrc" v-on:change="jsonSrcChange"
        style="height: 600px;resize: vertical;font-size: 14px;">
        </textarea>
    </div>

    <div class="uk-width-6-10" style="padding: 10px;">
        <div class="uk-width-1-1"> TODO: 隐藏/显示左侧输入框、复制、展开</div>
        <hr>
        <div id="json_result" class="uk-width-1-1" 
        style="height: 100%;width: 100%;max-width: 100%;word-wrap: break-word; padding-top: 10px;">
            <div v-html="jsonResult"></div>
        </div>
    </div>
</div>

<div>
TODO: 历史记录、保存
</div>


<script>
    vm_header.current_io = 'json'
    var vm = new Vue({
        el: "#main",
        data: {
            jsonSrc: '',
            jsonResultTemp: '',
            jsonResult: ''
        },
        methods: {
            isArray: function (obj) {
                return  obj && typeof obj === 'object' && typeof obj.length === 'number' && !(obj.propertyIsEnumerable('length'))
            },
            parse: function (obj) {
                if ((typeof obj) == 'object') {
                    if (obj == null) {
                        this.jsonResultTemp = this.jsonResultTemp + 'null' + '\n'
                    }
                    for (key in obj) {
                        if (key.startsWith("__")) {
                            return
                        }
                        this.jsonResultTemp = this.jsonResultTemp + key + '\n'
                        this.parse(obj[key])
                    }
                }
                this.jsonResultTemp = this.jsonResultTemp + obj + '\n'
            },
            jsonSrcChange: function () {
                if (this.jsonSrc === '') {
                    return
                }
                try {
                    var obj = JSON.parse(this.jsonSrc)
                    console.log(obj)
                    this.jsonResult = ''
                    this.parse(obj)
                    this.jsonResult = this.jsonResultTemp
                } catch (e) {
                    this.jsonResult = e.message;
                }
            }
        }
    })

</script>
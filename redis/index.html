---
title: fredis
layout: default
keywords: [redis]
description: web 版 redis 客户端--fredis，基于 ws2s.js 开发。
---

<div id="main" class="uk-height-1-1">
    <div class="uk-flex uk-height-1-1">
        <div style="width:30%;min-width:240px;">
            <button class="uk-button">add new connection</button>

            <ul>
                <li v-for="connection in redisConnections">
                    {% raw %}
                    {{connection.name}}
                    {{connection.ws2sServer}}
                    {{connection.host}}
                    {{connection.port}}
                    {{connection.auth}}
                    {% endraw %}
                    <button class="uk-button" v-on:click="connect(connection)">connect</button>
                    <button class="uk-button" v-on:click="deleteOne(connection)">delete</button>
                </li>
            </ul>
            
        </div>
        <div id="terminal" style="width:100%;"></div>
    </div>
</div>

<script src="https://gitee.com/chenyanclyz/ws2s/raw/master/ws2s-js/ws2s.js"></script>
<script src="https://cdn.rawgit.com/jcubic/jquery.terminal/master/js/jquery.terminal.min.js"></script>
<link href="https://cdn.rawgit.com/jcubic/jquery.terminal/master/css/jquery.terminal.min.css" rel="stylesheet"/>

<script>

    var vm = new Vue({
        el: "#main",
        data: {
            redisConnections: []
        },
        mounted: function () {
            if (!localStorage.redis_connections) {
                localStorage.redis_connections = JSON.stringify([{
                    name: "feling.io",
                    ws2sServer: "wss://feling.io/ws2s-server/",
                    host: "172.17.248.195",
                    port: 6379,
                    auth: null
                }])
            }
            this.redisConnections = JSON.parse(localStorage.redis_connections)
        },
        methods: {
            connect: function (connection) {
                var redis = new WS2S(connection.ws2sServer)
                                .newRedisCient(connection.host, connection.port, connection.auth)
                redis.onReady = () => {
                    var terminal = $('#terminal').terminal(function(command, term) {
                        if (command == 'exit') {
                            term.destroy()
                        } else {
                            redis.request(command)
                        }
                    }, {
                        greetings: 'powered by ws2s project: https://github.com/playlay/ws2s' + '\n',
                        name: 'redis_terminal_' + connection.host + connection.port,
                        height: '100%',
                        width: '100%',
                        prompt: 'fredis> '
                    })
                    redis.onResponse = (data) => {
                        terminal.echo(String(data))
                    }
                    redis.onError = (error) => {
                        terminal.error(JSON.stringify(error))
                    }
                }
            },
            deleteOne: function (connection) {
            },
        }
    })
</script>